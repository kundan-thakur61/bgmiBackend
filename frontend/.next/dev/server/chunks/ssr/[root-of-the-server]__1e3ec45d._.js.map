{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kundan/Desktop/bgmi/frontend/src/app/auth/callback/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport Link from 'next/link';\r\n\r\nexport default function AuthCallbackPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const { checkAuth } = useAuth();\r\n  const [status, setStatus] = useState('processing');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const handleCallback = async () => {\r\n      const token = searchParams.get('token');\r\n      const errorParam = searchParams.get('error');\r\n\r\n      if (errorParam) {\r\n        setStatus('error');\r\n        setError(errorParam);\r\n        return;\r\n      }\r\n\r\n      if (!token) {\r\n        setStatus('error');\r\n        setError('No authentication token received');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Store the token\r\n        localStorage.setItem('token', token);\r\n        \r\n        // Verify and load user data\r\n        await checkAuth();\r\n        \r\n        setStatus('success');\r\n        \r\n        // Redirect to matches page after short delay\r\n        setTimeout(() => {\r\n          router.push('/matches');\r\n        }, 1500);\r\n      } catch (err) {\r\n        setStatus('error');\r\n        setError(err.message || 'Authentication failed');\r\n        localStorage.removeItem('token');\r\n      }\r\n    };\r\n\r\n    handleCallback();\r\n  }, [searchParams, router, checkAuth]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center px-4 bg-dark-900\">\r\n      <div className=\"text-center\">\r\n        {status === 'processing' && (\r\n          <>\r\n            <div className=\"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-6\"></div>\r\n            <h1 className=\"text-2xl font-bold mb-2\">Signing you in...</h1>\r\n            <p className=\"text-dark-400\">Please wait while we complete your authentication</p>\r\n          </>\r\n        )}\r\n\r\n        {status === 'success' && (\r\n          <>\r\n            <div className=\"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n              <svg className=\"w-8 h-8 text-green-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n              </svg>\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold mb-2 text-green-400\">Login Successful!</h1>\r\n            <p className=\"text-dark-400\">Redirecting you to matches...</p>\r\n          </>\r\n        )}\r\n\r\n        {status === 'error' && (\r\n          <>\r\n            <div className=\"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n              <svg className=\"w-8 h-8 text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold mb-2 text-red-400\">Authentication Failed</h1>\r\n            <p className=\"text-dark-400 mb-6\">{error}</p>\r\n            <Link href=\"/login\" className=\"btn-primary\">\r\n              Try Again\r\n            </Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,yIAAO;IAC7B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,MAAM,iBAAiB;YACrB,MAAM,QAAQ,aAAa,GAAG,CAAC;YAC/B,MAAM,aAAa,aAAa,GAAG,CAAC;YAEpC,IAAI,YAAY;gBACd,UAAU;gBACV,SAAS;gBACT;YACF;YAEA,IAAI,CAAC,OAAO;gBACV,UAAU;gBACV,SAAS;gBACT;YACF;YAEA,IAAI;gBACF,kBAAkB;gBAClB,aAAa,OAAO,CAAC,SAAS;gBAE9B,4BAA4B;gBAC5B,MAAM;gBAEN,UAAU;gBAEV,6CAA6C;gBAC7C,WAAW;oBACT,OAAO,IAAI,CAAC;gBACd,GAAG;YACL,EAAE,OAAO,KAAK;gBACZ,UAAU;gBACV,SAAS,IAAI,OAAO,IAAI;gBACxB,aAAa,UAAU,CAAC;YAC1B;QACF;QAEA;IACF,GAAG;QAAC;QAAc;QAAQ;KAAU;IAEpC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;gBACZ,WAAW,8BACV;;sCACE,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;gBAIhC,WAAW,2BACV;;sCACE,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;gCAAyB,MAAK;gCAAO,SAAQ;gCAAY,QAAO;0CAC7E,cAAA,8OAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;sCAGzE,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;gBAIhC,WAAW,yBACV;;sCACE,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;gCAAuB,MAAK;gCAAO,SAAQ;gCAAY,QAAO;0CAC3E,cAAA,8OAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;sCAGzE,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,8OAAC;4BAAE,WAAU;sCAAsB;;;;;;sCACnC,8OAAC,uKAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAc;;;;;;;;;;;;;;;;;;;AAQxD"}}]
}