{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kundan/Desktop/bgmi/frontend/src/app/login/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const { sendOtp, verifyOtp } = useAuth();\r\n  const [step, setStep] = useState('phone'); // 'phone' or 'otp'\r\n  const [phone, setPhone] = useState('');\r\n  const [otp, setOtp] = useState('');\r\n  const [devOtp, setDevOtp] = useState(''); // For development testing\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSendOtp = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    \r\n    if (!/^[6-9]\\d{9}$/.test(phone)) {\r\n      setError('Please enter a valid 10-digit mobile number');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const data = await sendOtp(phone);\r\n      // In development, backend returns OTP for testing\r\n      if (data.otp) {\r\n        setDevOtp(data.otp);\r\n      }\r\n      setStep('otp');\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to send OTP');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOtp = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (otp.length !== 6) {\r\n      setError('Please enter 6-digit OTP');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const data = await verifyOtp(phone, otp);\r\n      if (data.isNewUser) {\r\n        // New user - redirect to complete registration\r\n        router.push(`/register?phone=${phone}`);\r\n      } else {\r\n        // Existing user - logged in\r\n        router.push('/matches');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message || 'Invalid OTP');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center px-4 py-12 bg-dark-900\">\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Logo */}\r\n        <Link href=\"/\" className=\"flex items-center justify-center space-x-2 mb-8\">\r\n          <div className=\"w-12 h-12 bg-gradient-to-br from-primary-500 to-gaming-purple rounded-lg flex items-center justify-center\">\r\n            <span className=\"text-white font-bold text-2xl\">B</span>\r\n          </div>\r\n          <span className=\"text-2xl font-bold font-display gradient-text\">BattleZone</span>\r\n        </Link>\r\n\r\n        {/* Card */}\r\n        <div className=\"card p-8\">\r\n          <h1 className=\"text-2xl font-bold text-center mb-2\">\r\n            {step === 'phone' ? 'Login / Sign Up' : 'Verify OTP'}\r\n          </h1>\r\n          <p className=\"text-dark-400 text-center mb-8\">\r\n            {step === 'phone' \r\n              ? 'Enter your mobile number to continue' \r\n              : `Enter the OTP sent to +91 ${phone}`}\r\n          </p>\r\n\r\n          {/* Development OTP Display */}\r\n          {devOtp && step === 'otp' && (\r\n            <div className=\"bg-yellow-500/10 border border-yellow-500/20 text-yellow-400 px-4 py-3 rounded-lg mb-6 text-sm\">\r\n              <strong>Dev Mode:</strong> Your OTP is <span className=\"font-mono text-lg\">{devOtp}</span>\r\n              <p className=\"text-xs mt-1 text-yellow-500/70\">This will be removed in production</p>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-6 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {step === 'phone' ? (\r\n            <form onSubmit={handleSendOtp} className=\"space-y-6\">\r\n              <div>\r\n                <label htmlFor=\"phone\" className=\"label\">Mobile Number</label>\r\n                <div className=\"flex\">\r\n                  <span className=\"inline-flex items-center px-4 rounded-l-lg border border-r-0 border-dark-600 bg-dark-700 text-dark-300\">\r\n                    +91\r\n                  </span>\r\n                  <input\r\n                    type=\"tel\"\r\n                    id=\"phone\"\r\n                    value={phone}\r\n                    onChange={(e) => setPhone(e.target.value.replace(/\\D/g, '').slice(0, 10))}\r\n                    className=\"input rounded-l-none\"\r\n                    placeholder=\"Enter 10-digit number\"\r\n                    maxLength={10}\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || phone.length !== 10}\r\n                className=\"btn-primary w-full py-3\"\r\n              >\r\n                {loading ? 'Sending OTP...' : 'Send OTP'}\r\n              </button>\r\n\r\n              {/* Divider */}\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-0 flex items-center\">\r\n                  <div className=\"w-full border-t border-dark-600\"></div>\r\n                </div>\r\n                <div className=\"relative flex justify-center text-sm\">\r\n                  <span className=\"px-4 bg-dark-800 text-dark-400\">or continue with</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Google Sign In */}\r\n              <a\r\n                href={`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api'}/auth/google`}\r\n                className=\"w-full flex items-center justify-center gap-3 px-4 py-3 border border-dark-600 rounded-lg hover:bg-dark-700 transition-colors\"\r\n              >\r\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\r\n                  <path\r\n                    fill=\"#4285F4\"\r\n                    d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\r\n                  />\r\n                  <path\r\n                    fill=\"#34A853\"\r\n                    d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\r\n                  />\r\n                  <path\r\n                    fill=\"#FBBC05\"\r\n                    d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\r\n                  />\r\n                  <path\r\n                    fill=\"#EA4335\"\r\n                    d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\r\n                  />\r\n                </svg>\r\n                <span>Continue with Google</span>\r\n              </a>\r\n            </form>\r\n          ) : (\r\n            <form onSubmit={handleVerifyOtp} className=\"space-y-6\">\r\n              <div>\r\n                <label htmlFor=\"otp\" className=\"label\">Enter OTP</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"otp\"\r\n                  value={otp}\r\n                  onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\r\n                  className=\"input text-center text-2xl tracking-widest\"\r\n                  placeholder=\"000000\"\r\n                  maxLength={6}\r\n                  required\r\n                  autoFocus\r\n                />\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || otp.length !== 6}\r\n                className=\"btn-primary w-full py-3\"\r\n              >\r\n                {loading ? 'Verifying...' : 'Verify OTP'}\r\n              </button>\r\n\r\n              <div className=\"text-center\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setStep('phone');\r\n                    setOtp('');\r\n                    setError('');\r\n                  }}\r\n                  className=\"text-dark-400 hover:text-white text-sm\"\r\n                >\r\n                  ← Change number\r\n                </button>\r\n                <span className=\"text-dark-600 mx-2\">|</span>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleSendOtp}\r\n                  disabled={loading}\r\n                  className=\"text-primary-400 hover:text-primary-300 text-sm\"\r\n                >\r\n                  Resend OTP\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n\r\n          <div className=\"mt-6 pt-6 border-t border-dark-700 text-center text-sm text-dark-400\">\r\n            <Link href=\"/forgot-password\" className=\"text-primary-400 hover:text-primary-300 block mb-4\">\r\n              Forgot your password?\r\n            </Link>\r\n            By continuing, you agree to our{' '}\r\n            <Link href=\"/terms-conditions\" className=\"text-primary-400 hover:text-primary-300\">\r\n              Terms\r\n            </Link>{' '}\r\n            and{' '}\r\n            <Link href=\"/privacy-policy\" className=\"text-primary-400 hover:text-primary-300\">\r\n              Privacy Policy\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Back to home */}\r\n        <div className=\"mt-6 text-center\">\r\n          <Link href=\"/\" className=\"text-dark-400 hover:text-white text-sm\">\r\n            ← Back to home\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}